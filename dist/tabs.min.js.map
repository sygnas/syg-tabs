{"version":3,"file":"tabs.min.js","sources":["../src/index.js"],"sourcesContent":["/**\r\n * Easy tab controll\r\n *\r\n * @author   Hiroshi Fukuda <info.sygnas@gmail.com>\r\n * @license  MIT\r\n */\r\n\r\n// デフォルト設定\r\nconst defaults = {\r\n    // タブボタンのセレクタ\r\n    tab_selector: 'a',\r\n    // URLハッシュに対応するか\r\n    use_url_hash: false\r\n};\r\n\r\n// data属性：コンテンツ\r\nconst DATA_CONTENT = 'data-tabs-content';\r\n// data属性：前のボタン\r\nconst DATA_PREV = 'data-tabs-prev';\r\n// data属性：次のボタン\r\nconst DATA_NEXT = 'data-tabs-next';\r\n// data属性：初期ページ番号\r\nconst DATA_INITIAL = 'data-tabs-initial';\r\n// data属性：アクティブボタン / アクティブコンテンツ\r\nconst DATA_ACTIVE = 'data-tabs-active';\r\n\r\n\r\n\r\nexport default class {\r\n\r\n    /**\r\n     * コンストラクタ\r\n     * @param {String} target タブボタングループのDOMセレクタ\r\n     */\r\n    constructor(target, options) {\r\n        // 設定\r\n        this.opt = Object.assign(defaults, options);\r\n\r\n        // タブグループのエレメント\r\n        this.tab_group = document.querySelector(target);\r\n        // 個々のタブボタン\r\n        this.tab_buttons = this.tab_group.querySelectorAll(\r\n            this.opt.tab_selector\r\n        );\r\n        // コンテンツ\r\n        this.contents = document.querySelectorAll(\r\n            this.tab_group.getAttribute(DATA_CONTENT)\r\n        );\r\n        // 戻るボタン\r\n        this.prev_button = document.querySelector(\r\n            this.tab_group.getAttribute(DATA_PREV)\r\n        );\r\n        // 進むボタン\r\n        this.next_button = document.querySelector(\r\n            this.tab_group.getAttribute(DATA_NEXT)\r\n        );\r\n\r\n        // イベント設定\r\n        this._init_event();\r\n\r\n        // 現在表示しているページを取得\r\n        this.active = 0;\r\n        this._set_initial_page();\r\n    }\r\n\r\n    /**\r\n     * 指定した index のタブをアクティブにする\r\n     * @param {Number} index タブ番号\r\n     */\r\n    set_active_from_index(index) {\r\n        // タブボタンとコンテンツにアクティブ属性付与\r\n        get_node_array(this.tab_buttons).forEach((btn, i) => {\r\n            if (index === i) {\r\n                btn.setAttribute(DATA_ACTIVE, 'true');\r\n            } else {\r\n                btn.setAttribute(DATA_ACTIVE, 'false');\r\n            }\r\n        });\r\n\r\n        get_node_array(this.contents).forEach((content, i) => {\r\n            if (index === i) {\r\n                content.setAttribute(DATA_ACTIVE, 'true');\r\n            } else {\r\n                content.setAttribute(DATA_ACTIVE, 'false');\r\n            }\r\n        });\r\n\r\n        // URLにハッシュ付与\r\n        if (this.opt.use_url_hash) {\r\n            window.location.hash = index;\r\n        }\r\n        this.active = index;\r\n    }\r\n\r\n    /**\r\n     * イベント設定\r\n     */\r\n    _init_event() {\r\n\r\n        // タブボタンをクリック\r\n        // 指定されたページをアクティブにする\r\n        get_node_array(this.tab_buttons).forEach((elm) => {\r\n            this._init_event_tab_button(elm);\r\n        });\r\n\r\n        // 戻るボタン\r\n        if (this.prev_button) {\r\n            this.prev_button.addEventListener('click', (e) => {\r\n                this._init_event_prev_button(e);\r\n            });\r\n        }\r\n\r\n        // 進むボタン\r\n        if (this.next_button) {\r\n            this.next_button.addEventListener('click', (e) => {\r\n                this._init_event_next_button(e);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * タブボタンのイベント\r\n     * @param elm {DOM} ボタンエレメント\r\n     */\r\n    _init_event_tab_button(elm) {\r\n        elm.addEventListener('click', (e) => {\r\n            const index = Number.parseInt(e.target.hash.substr(1), 10);\r\n            this.set_active_from_index(index);\r\n            e.preventDefault();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 戻るボタンのイベント\r\n     * @param e {Event} クリックイベント\r\n     */\r\n    _init_event_prev_button(e) {\r\n        const index = this.active - 1 >= 0 ?\r\n            this.active - 1 : this.contents.length - 1;\r\n        this.set_active_from_index(index);\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * 進むボタンのイベント\r\n     * @param e {Event} クリックイベント\r\n     */\r\n    _init_event_next_button(e) {\r\n        const index = (this.active + 1) % this.contents.length;\r\n        this.set_active_from_index(index);\r\n        e.preventDefault();\r\n    }\r\n\r\n    /**\r\n     * 初期表示ページを設定する\r\n     */\r\n    _set_initial_page() {\r\n        let page_index = 0;\r\n\r\n        // まずはhtml側で指定された初期ページ番号を取得\r\n        page_index = Number.parseInt(\r\n            this.tab_group.getAttribute(DATA_INITIAL), 10\r\n        ) || 0;\r\n\r\n        // URLパラメーターが有効だった場合\r\n        if (this.opt.use_url_hash) {\r\n            const hash = window.location.hash.substr(1);\r\n            const index = Number.parseInt(hash, 10);\r\n\r\n            // 1以上だったらページ指定\r\n            if (index >= 1) {\r\n                page_index = index;\r\n            }\r\n        }\r\n\r\n        // ページをアクティブにする\r\n        this.set_active_from_index(page_index);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * NodeListをArrayとして取り出す（IE対策）\r\n */\r\nfunction get_node_array(node_list) {\r\n    return Array.prototype.slice.call(node_list, 0);\r\n}\r\n"],"names":["get_node_array","node_list","Array","prototype","slice","call","defaults","DATA_CONTENT","DATA_PREV","DATA_NEXT","DATA_ACTIVE","target","options","opt","Object","assign","tab_group","document","querySelector","tab_buttons","this","querySelectorAll","tab_selector","contents","getAttribute","prev_button","next_button","_init_event","active","_set_initial_page","index","forEach","btn","i","setAttribute","content","use_url_hash","location","hash","elm","_init_event_tab_button","addEventListener","e","_init_event_prev_button","_init_event_next_button","Number","parseInt","substr","set_active_from_index","preventDefault","length","page_index","window"],"mappings":"uLAqLA,SAGSA,EAAeC,UACbC,MAAMC,UAAUC,MAAMC,KAAKJ,EAAW,2VAjL3CK,gBAEY,kBAEA,GAIZC,EAAe,oBAEfC,EAAY,iBAEZC,EAAY,iBAIZC,EAAc,gDAUJC,EAAQC,kBAEXC,IAAMC,OAAOC,OAAOT,EAAUM,QAG9BI,UAAYC,SAASC,cAAcP,QAEnCQ,YAAcC,KAAKJ,UAAUK,iBAC9BD,KAAKP,IAAIS,mBAGRC,SAAWN,SAASI,iBACrBD,KAAKJ,UAAUQ,aAAajB,SAG3BkB,YAAcR,SAASC,cACxBE,KAAKJ,UAAUQ,aAAahB,SAG3BkB,YAAcT,SAASC,cACxBE,KAAKJ,UAAUQ,aAAaf,SAI3BkB,mBAGAC,OAAS,OACTC,4EAOaC,KAEHV,KAAKD,aAAaY,QAAQ,SAACC,EAAKC,GACvCH,IAAUG,IACNC,aAAaxB,EAAa,UAE1BwB,aAAaxB,EAAa,aAIvBU,KAAKG,UAAUQ,QAAQ,SAACI,EAASF,GACxCH,IAAUG,IACFC,aAAaxB,EAAa,UAE1BwB,aAAaxB,EAAa,WAKtCU,KAAKP,IAAIuB,sBACFC,SAASC,KAAOR,QAEtBF,OAASE,qDAUCV,KAAKD,aAAaY,QAAQ,SAACQ,KACjCC,uBAAuBD,KAI5BnB,KAAKK,kBACAA,YAAYgB,iBAAiB,QAAS,SAACC,KACnCC,wBAAwBD,KAKjCtB,KAAKM,kBACAA,YAAYe,iBAAiB,QAAS,SAACC,KACnCE,wBAAwBF,oDASlBH,gBACfE,iBAAiB,QAAS,SAACC,OACrBZ,EAAQe,OAAOC,SAASJ,EAAE/B,OAAO2B,KAAKS,OAAO,GAAI,MAClDC,sBAAsBlB,KACzBmB,mEAQcP,OACdZ,EAAQV,KAAKQ,OAAS,GAAK,EAC7BR,KAAKQ,OAAS,EAAIR,KAAKG,SAAS2B,OAAS,OACxCF,sBAAsBlB,KACzBmB,iEAOkBP,OACdZ,GAASV,KAAKQ,OAAS,GAAKR,KAAKG,SAAS2B,YAC3CF,sBAAsBlB,KACzBmB,iEAOEE,EAAa,OAGJN,OAAOC,SAChB1B,KAAKJ,UAAUQ,aA3IN,qBA2IkC,KAC1C,EAGDJ,KAAKP,IAAIuB,aAAc,KACjBE,EAAOc,OAAOf,SAASC,KAAKS,OAAO,GACnCjB,EAAQe,OAAOC,SAASR,EAAM,IAGhCR,GAAS,MACIA,QAKhBkB,sBAAsBG"}